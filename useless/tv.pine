//@version=5
indicator("ALL IN ONE", overlay=true)

// === CONFIGURATION (Hardcoded instead of inputs) ===
show1d      = true
show1dMid   = true
show12h     = true
show4h      = true

col1d       = color.black
col1dMid    = color.red
col12h      = color.blue
col4h       = color.green

// === INDICATORS ===
ema10  = ta.ema(close, 10)
ema20  = ta.ema(close, 20)
sma25  = ta.sma(close, 25)
ema100 = ta.ema(close, 100)

plot(ema10,  color=color.orange,  linewidth=2, title="EMA 10")
plot(ema20,  color=color.green,   linewidth=2, title="EMA 20")
plot(sma25,  color=color.black,   linewidth=3, title="SMA 25")
plot(ema100, color=#E4005C, linewidth=3, title="EMA 100")

// === DATA RETRIEVAL ===
standardTicker = ticker.new(syminfo.prefix, syminfo.ticker)

// 1D Data
prev1dHigh     = request.security(standardTicker, "D", high[1])
prev1dLow      = request.security(standardTicker, "D", low[1])
prev1dMid      = (prev1dHigh + prev1dLow) / 2
target1dStart  = request.security(standardTicker, "D", time[1])

// 12H Data
prev12hHigh    = request.security(standardTicker, "720", high[1])
prev12hLow     = request.security(standardTicker, "720", low[1])
target12hStart = request.security(standardTicker, "720", time[1])

// 4H Data
prev4hHigh     = request.security(standardTicker, "240", high[1])
prev4hLow      = request.security(standardTicker, "240", low[1])
target4hStart  = request.security(standardTicker, "240", time[1])

// === STATUS LINE VALUES ===
plot(prev1dHigh,  "Prev 1D High",   color=na, display = show1d    ? display.status_line : display.none)
plot(prev1dMid,   "Prev 1D Middle", color=na, display = show1dMid ? display.status_line : display.none)
plot(prev1dLow,   "Prev 1D Low",    color=na, display = show1d    ? display.status_line : display.none)
plot(prev12hHigh, "Prev 12H High",  color=na, display = show12h   ? display.status_line : display.none)
plot(prev12hLow,  "Prev 12H Low",   color=na, display = show12h   ? display.status_line : display.none)
plot(prev4hHigh,  "Prev 4H High",   color=na, display = show4h    ? display.status_line : display.none)
plot(prev4hLow,   "Prev 4H Low",    color=na, display = show4h    ? display.status_line : display.none)

// === LINE DRAWING ===
var line line1dHigh = na
var line line1dLow  = na
var line line1dMid  = na
var line line12hHigh = na
var line line12hLow  = na
var line line4hHigh = na
var line line4hLow  = na

if barstate.islast
    // Extend the line to current time + 1 day
    actualEnd = time + 86400000

    // Clean up old lines
    line.delete(line1dHigh)
    line.delete(line1dLow)
    line.delete(line1dMid)
    line.delete(line12hHigh)
    line.delete(line12hLow)
    line.delete(line4hHigh)
    line.delete(line4hLow)

    // Create new lines
    if show1d
        line1dHigh := line.new(target1dStart, prev1dHigh, actualEnd, prev1dHigh, xloc=xloc.bar_time, color=col1d, width=4)
        line1dLow  := line.new(target1dStart, prev1dLow,  actualEnd, prev1dLow,  xloc=xloc.bar_time, color=col1d, width=4)

    if show1dMid
        line1dMid := line.new(target1dStart, prev1dMid, actualEnd, prev1dMid, xloc=xloc.bar_time, color=col1dMid, width=4)

    if show12h
        line12hHigh := line.new(target12hStart, prev12hHigh, actualEnd, prev12hHigh, xloc=xloc.bar_time, color=col12h, width=3)
        line12hLow  := line.new(target12hStart, prev12hLow,  actualEnd, prev12hLow,  xloc=xloc.bar_time, color=col12h, width=3)

    if show4h
        line4hHigh := line.new(target4hStart, prev4hHigh, actualEnd, prev4hHigh, xloc=xloc.bar_time, color=col4h, width=2)
        line4hLow  := line.new(target4hStart, prev4hLow,  actualEnd, prev4hLow,  xloc=xloc.bar_time, color=col4h, width=2)
