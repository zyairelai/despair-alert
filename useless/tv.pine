//@version=5
indicator("ALL IN ONE", overlay=true)

// === CONFIGURATION (Hardcoded instead of inputs) ===
showHigh = false
showLow  = false
show4hHigh = true
show4hLow  = true
colHigh  = color.black
colLow   = color.black
col4hHigh = color.black
col4hLow  = color.black

// === INDICATORS ===
ema10  = ta.ema(close, 10)
ema20  = ta.ema(close, 20)
sma25  = ta.sma(close, 25)
ema100 = ta.ema(close, 100)

plot(ema10,  color=color.orange,  linewidth=2, title="EMA 10")
plot(ema20,  color=color.green,   linewidth=2, title="EMA 20")
plot(sma25,  color=color.black,   linewidth=3, title="SMA 25")
plot(ema100, color=#E4005C, linewidth=3, title="EMA 100")

// === DATA RETRIEVAL ===
standardTicker = ticker.new(syminfo.prefix, syminfo.ticker)
prevHigh       = request.security(standardTicker, "D", high[1])
prevLow        = request.security(standardTicker, "D", low[1])
targetStart    = request.security(standardTicker, "D", time[1])

prev4hHigh     = request.security(standardTicker, "240", high[1])
prev4hLow      = request.security(standardTicker, "240", low[1])
target4hStart  = request.security(standardTicker, "240", time[1])

// === STATUS LINE VALUES ===
plot(prevHigh, "High Value", color=na, display = showHigh ? display.status_line : display.none)
plot(prevLow,  "Low Value",  color=na, display = showLow  ? display.status_line : display.none)
plot(prev4hHigh, "4H High Value", color=na, display = show4hHigh ? display.status_line : display.none)
plot(prev4hLow,  "4H Low Value",  color=na, display = show4hLow  ? display.status_line : display.none)

// === LINE DRAWING ===
var line lineHigh = na
var line lineLow  = na
var line line4hHigh = na
var line line4hLow  = na

if barstate.islast
    // Extend the line to current time + 1 day (86,400,000 milliseconds)
    actualEnd = time + 86400000

    // Clean up old lines
    line.delete(lineHigh)
    line.delete(lineLow)
    line.delete(line4hHigh)
    line.delete(line4hLow)

    // Create new lines
    if showHigh
        lineHigh := line.new(targetStart, prevHigh, actualEnd, prevHigh, xloc=xloc.bar_time, color=colHigh, width=3)

    if showLow
        lineLow := line.new(targetStart, prevLow, actualEnd, prevLow, xloc=xloc.bar_time, color=colLow, width=3)

    if show4hHigh
        line4hHigh := line.new(target4hStart, prev4hHigh, actualEnd, prev4hHigh, xloc=xloc.bar_time, color=col4hHigh, width=2)

    if show4hLow
        line4hLow := line.new(target4hStart, prev4hLow, actualEnd, prev4hLow, xloc=xloc.bar_time, color=col4hLow, width=2)
